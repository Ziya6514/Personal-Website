<%- include("../../views/partials/admin/header") %>

<section class="content-main">
    <div class="content-header">
        <h2 class="content-title card-title">Admin Dashboard</h2>
    </div>

    <!-- Dashboard Overview Section -->
    <div class="row">
        <div class="col-md-3">
            <div class="card card-body">
                <h5>Total Categories</h5>
                <h2><%= totalCategories %></h2>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card card-body">
                <h5>Total Products</h5>
                <h2><%= totalProducts %></h2>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card card-body">
                <h5>Total Users</h5>
                <h2><%= totalUsers %></h2>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card card-body">
                <h5>Total Orders</h5>
                <h2><%= totalOrders %></h2>
            </div>
        </div>
    </div>

    <!-- Revenue Section -->
    <div class="row mt-4">
        <div class="col-md-4">
            <div class="card card-body">
                <h5>COD Revenue</h5>
                <h2>$<%= codRevenue.toFixed(2) %></h2>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card card-body">
                <h5>Stripe Revenue</h5>
                <h2>$<%= stripeRevenue.toFixed(2) %></h2>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card card-body">
                <h5>Total Revenue</h5>
                <h2>$<%= totalRevenue.toFixed(2) %></h2>
            </div>
        </div>
    </div>

    <!-- Sales & Profit Chart Section -->
    <div class="dashboard-charts mt-5">
        <h3>Monthly Sales & Revenue Overview</h3>
        <canvas id="salesRevenueChart" width="400" height="200"></canvas>
    </div>
</section>

<%- include("../../views/partials/admin/footer") %>

<!-- Chart.js Script -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Placeholder for Monthly Sales & Revenue Data
    const monthlyData = {
        labels: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
        sales: [150, 200, 250, 300, 350, 400, 450, 500, 550, 600, 650, 700],
        revenue: [1200, 1800, 2200, 2500, 3000, 3500, 4000, 4500, 5000, 5500, 6000, 6500]
    };

    const ctx = document.getElementById("salesRevenueChart").getContext("2d");
    new Chart(ctx, {
        type: "line",
        data: {
            labels: monthlyData.labels,
            datasets: [
                {
                    label: "Monthly Sales",
                    data: monthlyData.sales,
                    borderColor: "rgba(54, 162, 235, 1)",
                    backgroundColor: "rgba(54, 162, 235, 0.2)",
                    fill: true,
                    tension: 0.4,
                    borderWidth: 2
                },
                {
                    label: "Monthly Revenue",
                    data: monthlyData.revenue,
                    borderColor: "rgba(75, 192, 192, 1)",
                    backgroundColor: "rgba(75, 192, 192, 0.2)",
                    fill: true,
                    tension: 0.4,
                    borderWidth: 2
                }
            ]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>
